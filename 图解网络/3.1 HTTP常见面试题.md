# HTTPS和HTTP

### HTTPS的基本概念

1. HTTP 超文本传输协议，明文传输的

2. HTTPS 是在 TCP 和HTTP网络层之间 加入 SSL/TLS 安全协议，使得报文能够加密传输

3. HTTPS在TCP 3次握手之后还需要 SSL/TLS 的握手过程，才可以进入加密报文传输

4. HTTPS之中非对称加密用于确认身份，对称加密用于加密传输的数据，哈希值验证数据完整性

5. 私钥加签数据，公钥解密加签后的数据

6. 公钥加密数据，私钥解密数据

7. CA数字证书认证机构，是客户端验证服务器的公钥是否可信，也就是说客户端使用公钥加签和加密数据的时候，先验证一下公钥是否可信，否则用了黑客的公钥加密数据又被黑客解密窃取

8. 服务器向客户端证明它的身份，是使用私钥加密内容的哈希值，客户端使用公钥能解密表示是服务器

9. 客户端为了防止自己的信息被其他人读取需要用公钥加密数据，只有服务器有私钥所以只有服务器可以解密数据

10. 客户端发送数据之前还要验证公钥是合法的，所有有CA认证

11. RSA做为HTTPS协议中最为核心的加密/解密算法，这个最流行的非对称加密算法用于加签验证服务器身份、加密保护客户端数据

### 使用了HTTPS之后客户端还需要在发送数据到服务器之前使用RSA加密数据吗

```
不需要

客户端在发送数据到服务器之前使用RSA加密数据
是为了保证客户端信息不被黑客窃取那么不需要了，但是HTTPS之中，在应用层HTTP到TCP的这一层的时候会使用公钥加密数据
只有服务器有私钥可以解密数据 
首先RSA是最流行的非对称加密算法，同时也是在HTTPS之中最为核心的加密解密算法，被用于加签和加密
```

### HTTP 与 HTTPS

### SSL/TLS 协议建立流程 四次通信

1. ClientHello [SSL/TLS协议版本、随机数Random、支持的密码套件]
2. ServerResponse [CA证书]
3. ClientHello [验证CA证书并使用公钥加密报文]
4. ServerResponse [确认握手]

> SSL/TLS 的握手阶段结束

> 以上握手之间产生了三个随机数（Client Random、Server Random、pre-master key），组成本次通信会话秘钥

### HTTPS一定安全可靠吗

```
CA数字证书合法的前提，HTTPS是安全可靠的
```

### 抓包工具可以截取到客户端发送的数据是因为 客户端安装了抓包工具的跟证书，就是客户端信任抓包工具的CA证书

```
自己签发证书，且要被浏览器信任
```


### CA证书
```
server把自己的公钥注册到CA(数字认证机构)，数字认证机构使用私钥加密某一个服务器的公钥，颁发数字证书

client拿到服务器的数字证书，注意，客户端的数字证书是server给的，拿到CA去验证是否证书合法

client用证书获取公钥，用于加密和鉴别server的身份
```

### HTTPS如何解决HTTP的问题
```
1.混合加密
2.摘要算法-完整性
3.数字证书
```
### 服务器和客户端握手之后，使用随机数R和对称加密对数据加密

### 状态码

```
301 Moved Permanently
302 Found
304 Not Modified

400 Bad Request
403 Forbidden
404 Not Found

500 Internal Server Error
501 Not Implemented
502 Bad Gateway
503 Service Unavailable
```