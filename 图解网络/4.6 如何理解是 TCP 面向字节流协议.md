# 如何理解是 TCP 面向字节流协议

TCP 是面向字节流的协议，UDP 是面向报文的协议，根本在于 [发送方的机制不同]

### UDP

每个 UDP 报文就是一个用户消息的边界 - 一个UDP报文就能读到完整的用户信息

### TCP 

消息可能会被操作系统分组成多个的 TCP 报文 - 一个完整的用户消息被拆分成多个 TCP 报文

### 解释

不能认为一个用户消息对应一个 TCP 报文，所以 TCP 是面向字节流的协议

### 什么是粘包

当两个消息的某个部分内容被分到同一个 TCP 报文时，可以认定两个完全无关的信息在 TCP 传输报文时候在同一个报文

### 如何解决粘包

首先粘包的原因是接收方不知道用户消息的边界，所以要做的就是规定这个边界：

1. 固定消息长度 - 不灵活、很少用
2. 特殊字符做边界 - 比如 HTTP 通过设置回车符、换行符作为 HTTP 报文协议的边界
3. 自定义消息结构 - 个人理解就是自定义一个结构，第一个字节是表示长度、后面的表示内容等
