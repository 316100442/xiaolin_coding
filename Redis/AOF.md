# AOF

### 写时复制
```
为什么可以做到一边正常写数据一边AOF重写呢

因为fork了一个子进程，和主进程共享数据，注意：共享同一份数据

当主进程修改数据的时候会做两件事：

1. 复制一份数据出来修改那份复制出来的数据（写时复制技术）修改这份数据
2. 命令追加到 AOF缓冲区 和 AOF重写缓冲区（bgrewriteaof完成后所有内容追加到新的 AOF 的文件中）
```