# Redis常见数据类型

### simple dynamic string 简单动态字符串
```
# 结构
struct{ len, buf[], alloc, flags }

# 为啥不用C语言字符串实现
1.长度获取
2.有len用于杜绝缓冲区溢出
3.减少内存重新分配 (空间预分配、惰性空间释放)
4.C字符串以空字符串判定是否结束，对于一些有空字符串的数据就炸了，C字符串只能保存文本数据
```


### 跳表 ZshipList
```
Node {
    # SDS数据类型
    element字段 

    # 得分确定节点先后(升序)
    score字段 

    # 指向前一个紧邻节点
    backward

    # 节点跳转列表
    level 
            # 下一个节点指针
            forward

            # 节点间距
            span
}
```
```
1. 跳表数据结构逻辑上就是在单链表上，增加了多重链表，提高了访问效率，不用一个个节点遍历，从一个节点可以直接获取到间隔N个节点的节点地址

2. 数据结构上，每个节点有4个字段，每个节点可以持有最多32个不同距离的跳转节点地址(level)
```

### 为什么使用zskiplist而不用平衡树和哈希表

```
平衡树：
a. 插入和删除都会引起子树调整，逻辑复杂，实现难
b. 范围查找比较复杂
c. 内存占用没zskiplist灵活

哈希表不适合范围查找
```

### 压缩链表 ZipList

```
双向链表
```

### 快表 QuickList

```
ziplist为结点的双端链表
```