# 如何加锁

### 加锁的基本单位是 next-key lock (记录锁和间隙锁组合) 前开后闭

> 以下针对MySQL 8.0.26

### 临间锁 (pre_line_number,next_key_number] (相当于锁住更改行到上一行记录范围但不包括上一行)

### 记录锁 [line_number] 相当于仅锁住一条记录

### 间隙锁 (pre_line_number,next_key_number) (相当于锁住了两个实际存在记录之间但不包括上一行和下一行)

### 不同的查找
```
唯一索引等值查询
唯一索引范围查询
非唯一索引等值查询
非唯一索引范围查询
```

### 已经存在的记录
```
id a
0  0
4  4
8  8
16 16
32 32
```

### 唯一索引等值


### insert是如何加锁