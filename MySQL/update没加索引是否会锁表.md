# update没加索引会锁表吗

```
取决于update的where语句

加锁的位置准确的说，锁是加在索引上的而非行上


```

### 没有使用索引就会全表扫描 
```
对所有记录加上 next-key 锁（记录锁 + 间隙锁），相当于把整个表锁住了
对所有记录加上 next-key 锁（记录锁 + 间隙锁），相当于把整个表锁住了
对所有记录加上 next-key 锁（记录锁 + 间隙锁），相当于把整个表锁住了
```

### 但不是用了索引更新就一定会锁住全表的记录，因为有时候用了索引还是走了全表扫描

### 如何避免

> sql_safe_updates 安全更新模式 Where带上limit和索引列