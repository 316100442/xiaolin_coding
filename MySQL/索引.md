
# 什么是索引


### 索引分类

1. 数据结构角度

B+tree \ hash \ full-text

2. 字段特性角度

主键索引、唯一索引、普通索引、前缀索引。

3. 字段个数角度

单列索引、联合索引


### 什么时候需要/不需要创建索引

### 如何优化索引
```
1.前缀索引
2.覆盖索引
3.主键索引(长度小\自增[防止页分裂])
4.NOT NULL(统计和值比较变得复杂)
5.防止索引失效(左或者左右模糊匹配\联合索引\OR查找)
```

[谁还没碰到过索引失效呢](https://mp.weixin.qq.com/s/lEx6iRRP3MbwJ82Xwp675w)

### 执行计划
```
type 有6个值 (全表\唯一索引\非唯一索引\唯一索引且和常量值比较\索引范围\全索引扫描)
ALL >>> const
```

### 页分裂
```
MySQL的索引B+树以数据页的方式存储
当非自增主键添加值的时候，插入位置随机，有时候需要移动现有数据页到另一个数据页的情况
这种数据页数据之间复制转存的现象就是页分裂
```


### 唯一索引和普通索引有什么区别
```
唯一性
加锁的区别
```


### 主键索引和辅助索引有什么区别
```
B+树结构
回表
索引覆盖
```

### 索引下推
```
index(a,b,c) 查询 where a=? and c=?
B+树里面a是有序的,a相等的情况下b是有序的,c在a和b相等的情况有序的
这里原来5.6之前,a使用了索引找到所有a=?的主键值，然后回表查询到数据行，再比对c的值


MySQL5.6推出索引下推 innodDB存储引擎判定c是联合索引后面值，在存储引擎就可以获取到a=?&c=?的主键值，不需要再回表获取主键值,减少了回表次数
Explain执行计划里面有 Extra=Using index condition 代表使用了索引下推
```